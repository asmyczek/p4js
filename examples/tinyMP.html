<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Tiny Math Processor demo</title>
		<style>
			#graph  { border: 1px solid #999999; }
			#output { border: 1px solid #999999; list-style-position: outside; }
      #error  { color: red; }
		</style>
		<script type="text/javascript" src="../src/p4.js"></script>
		<script type="text/javascript" src="../src/tinyMP.js"></script>
		<script type="text/javascript">

			function execute(input) {
      var output  = document.getElementById("output"),
          canvas  = document.getElementById("graph"),
				  error   = document.getElementById('error'),
          tmp     = TinyMP(output, canvas);

        // Clean errors
				error.innerHTML  = "";

				// Parse and print results or error
				try {
					tmp.parse(input);
				} catch(e) {
					error.innerHTML = tmp.errorToString(e);
				}
			};

		</script>
	</head>

	<body>
    <h3>Tiny math processor</h3>

    <table cellpadding="0px">
      <tr>
        <td width="50%" valign="top">

          <p>
            <div>
<textarea id="input" rows="8" cols="50">
y=(x-1)^2
print(y)
z=y'x
print(z)
x=2
eval(y)
draw(y,x)
draw(z,x)
</textarea>
            </div>
            <a href="javascript:;" onclick="execute(document.getElementById('input').value);">Evaluate</a>
          </p>

          <p>
            <div id="error"></div>
            <div><i>eval()</i> and <i>print()</i> output:</div>
            <ul id="output">
            </ul>
          </p>

          <p>
          <div><i>draw()</i> function graph:</div>
            <canvas id="graph" width="600px" height="400px">Canvas not supported!</canvas>
          </p>

        </td>
        <td valign="top">
          <div style="margin-left:14px;">

          <p>
          The processor supports following arithmetic operations:<br/>
          <b>+</b>, <b>-</b>, <b>*</b>, <b>/</b>, <b>^</b>(power), <b>=</b>(assignment), 
          <b>'var</b>(derivation in a variable <i>var</i>)
          </p>

          <p>
          and commands:<br/>
          <b>eval(exp)</b> - evaluate an expression and print the result.<br/>
          <b>print(exp)</b> - print the expression.<br/>
          <b>draw(exp,var)</b> - chart the expression for variable <i>var</i>.<br/>
          </ul>
          </p>

          <p>
          Examples:
<pre>
y=(x-1)^2     - define function y=(x-1)^2
print(y)      - print the function y
z=y'x         - set z to the first derivate of y on x
print(z)      - print z
x=2           - set x to 2
eval(y)       - evaluate y, 1+(2-1)^2 prints 1
draw(y,x)     - draw y
draw(z,x)     - and draw z
</pre>
          </p>

          <p>
          No warranties for the results. This is just a P4JS parser and monadic computation demo.
          </p>

          </div>
        </td>
      </tr>
    </table>

	</body>
</html>

